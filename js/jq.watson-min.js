function modal(e){return new modal.prototype.Init(e)}(function(e){e.fn.wslider=function(t){function n(){function a(t,i){if(!t||!r){return null}r=false;var s=e(t).find("li");var o;var u;var a;if(e(t).hasClass("container-shading")){o="shading"}else if(e(t).hasClass("container-turn")){o="turn"}else{return false}u=e(s).index(e(t).find(".slide-active"));if("string"===typeof i){var l=e(s).index(s[u]);if("prev"==i){if(l==0){a=s.length-1}else{a=l-1}}if("next"==i){if(l==s.length-1){a=0}else{a=l+1}}}if("number"==typeof i){a=i}if(u!=a){f(o,n,u,a)}else{r=true}}function f(n,i,s,o){var a=e(i).find("li");var f=e(i).find(".slider-navigation "+u);if("simple"==n){e(a[s]).removeClass("slide-active");e(f).removeClass("slider-navigation-active");e(a[o]).addClass("slide-active");e(f[o]).addClass("slider-navigation-active");r=true}if("shading"==n){e(a[o]).addClass("slide-temp");e(a[s]).fadeOut(t.fadespeed,function(){e(f).removeClass("slider-navigation-active");e(f[o]).addClass("slider-navigation-active");e(a[s]).removeClass("slide-active");e(a[o]).addClass("slide-active");e(a).removeClass("slide-temp");e(a[s]).show();r=true})}if("turn"==n){var l=e(a[0]).width()*o;e(a[s]).removeClass("slide-active");e(f).removeClass("slider-navigation-active");e(i).find("ul").animate({left:"-"+l});e(a[o]).addClass("slide-active");e(f[o]).addClass("slider-navigation-active");r=true}}var n=this;var r=true;var i=true;var s=e(this).find("li");e(s[0]).addClass("slide-active");if(t.animation=="shading"){e(n).addClass("container-shading");e(s).addClass("slide-shading")}if(t.animation=="turn"){var o=e(n).width();e(s).width(o);e(s).parent().width(o*s.length);e(s).addClass("slide-turn");e(n).addClass("container-turn")}if(t.navigation){var u="a";e(n).append("<div class='slider-navigation'></div>");e(s).each(function(r){if(t.nav_bt.length){e(n).find(".slider-navigation").append(t.nav_bt[r])}else{e(n).find(".slider-navigation").append("<a href='javascript:void(0)'><div></div></a>")}});if(t.nav_bt.length){u=e(t.nav_bt[0])[0].tagName}e(n).find(".slider-navigation "+u).each(function(t,r){e(r).on("click",function(){a(n,t)});if(t==0){e(r).addClass("slider-navigation-active")}})}if(t.buttons){e(n).append(t.buttons_code.prev);e(n).append(t.buttons_code.next);e(n).find(".slide-prev").on("click",function(){a(n,"prev")});e(n).find(".slide-next").on("click",function(){a(n,"next")})}e(window).on("resize",function(){var t=e(n).width();if(e(n).hasClass("container-turn")){e(n).find("ul").width(t*s.length);e(n).find("li").width(t);var r=e(s).index(e(n).find(".slide-active"));var i=e(s[0]).width()*r;e(n).find("ul").css({left:"-"+i+"px"})}else{e(n).find("ul").width(t);e(n).find("li").width(t)}});if(t.autoplay){e(n).on("mouseover",function(){i=false});e(n).on("mouseleave",function(){i=true});setInterval(function(){if(i){a(n,"next")}},t.playspeed)}}t=e.extend({animation:"shading",navigation:true,buttons:true,fadespeed:500,playspeed:5e3,autoplay:true,buttons_code:{prev:"<a href='javascript:void(0)' class='slide-prev'>&lt;</a>",next:"<a href='javascript:void(0)' class='slide-next'>&gt;</a>"},nav_bt:[]},t);return this.each(n)};e.fn.wscroller=function(t){function s(){var s=e(t.container).height();var o=e(n).height();var u=e(window).scrollTop();e(t.container).css({position:"relative"});e(n).width(e(r).width());if(u>i){if(o+50>s){return}if(s-(u-i+o)>0){e(n).css({position:"fixed",top:"10px"})}else{e(n).css({position:"absolute",top:s-o+"px"})}}else{e(n).css({position:"relative"})}}t=e.extend({container:undefined},t);if(this.length==0||this.length>1){return null}if(!t.container||!e(t.container)){return null}var n=this;var r=e(n).parent();var i=e(r).offset().top;e(window).on("scroll load",function(){s()});e(window).on("resize",function(){e(n).width(e(r).width())});return this};e.fn.wajaxform=function(t){function n(n){var r=n;this.len=function(n){var i=3;var s=10;var o=e(r).find("[name='"+n+"']");if(t.data[n].min){i=t.data[n].min}if(t.data[n].max){s=t.data[n].max}return e(o).val().length>i&&e(o).val().length<s};this.empty=function(t){var n=e(r).find("[name='"+t+"']");return e(n).val().length>0};this.numeric=function(t){var n=e(r).find("[name='"+t+"']");return!isNaN(e(n).val()+1)&&e(n).val().length>0};this.email=function(t){var n=e(r).find("[name='"+t+"']");var i=/^([A-zА-я0-9_\.\-\+])+\@(([A-zА-я0-9\-])+\.)+([A-zА-я0-9]{2,4})+$/;return i.test(e(n).val())}}function r(){var r=this;var i=new n(r);var s=Object.keys(t.data);if(!s.length){return null}s.forEach(function(n){if(i[t.data[n].check]){var s=e(r).find("[name='"+n+"']");if(s.length){e(s).on("input",function(){var r=e(t.data[n].msgElement);if(i[t.data[n].check](n)){e(s).removeClass(t.classError);e(s).addClass(t.classSuccess);if(t.data[n].text&&r.length){e(r).text("")}}else{if(t.data[n].text&&r.length){e(r).text(t.data[n].text)}e(s).removeClass(t.classSuccess);e(s).addClass(t.classError)}})}}});e(r).on("submit",function(n){n.preventDefault();var o=false;s.forEach(function(n){var s=e(r).find("[name='"+n+"']");var u=e(t.data[n].msgElement);if(i[t.data[n].check]){if(!i[t.data[n].check](n)){o=true;e(s).removeClass(t.classSuccess);e(s).addClass(t.classError);if(t.data[n].text&&u.length){e(u).text(t.data[n].text)}}else{if(t.data[n].text&&u.length){e(u).text("")}}}});if(!o){if(t.ajax){var u=r.action;var a=r.method;var f={};if(!u){u=window.location.href}if(!a){a="get"}e(r).serializeArray().forEach(function(e){f[e.name]=e.value});e.ajax({url:u,method:a,data:f,success:t.callback})}else{e(r).unbind("submit");e(r).submit()}}})}t=e.extend({ajax:true,classError:"input-error",classSuccess:"input-success",callback:function(e){alert("Данные отправлены")},data:{}},t);return this.each(r)}})(jQuery);modal.prototype={width:500,load:function(){},Init:function(e){this.build();if(typeof e=="object"){if(e.width){this.width=e.width}if(e.load){this.load=e.load.bind(this)}if(e.title){this.setTitle(e.title)}if(e.content){this.setContent(e.content)}if(e.buttons){this.setButtons(e.buttons)}}},build:function(){this.$modalOverlay=$('<div id="modal-overlay">').hide();this.$modalBox=$('<div class="modal-box" />').hide();this.$modal=$('<div class="modal" />');this.$modalHeader=$("<header />");this.$modalClose=$('<span class="modal-close" />').html("&times;");this.$modalBody=$("<section />");this.$modalFooter=$("<footer />");this.$modal.append(this.$modalHeader);this.$modal.append(this.$modalClose);this.$modal.append(this.$modalBody);this.$modal.append(this.$modalFooter);this.$modalBox.append(this.$modal);this.$modalClose.on("click",$.proxy(this.close,this))},close:function(e){if(e){if(!$(e.target).hasClass("modal-close-btn")&&e.target!=this.$modalClose[0]&&e.target!=this.$modalBox[0]){return}e.preventDefault()}if(!this.$modalBox)return;this.$modalOverlay.remove();this.$modalBox.fadeOut("fast",$.proxy(function(){this.$modalBox.remove();$(document.body).css("overflow",this.bodyOveflow)},this))},show:function(){this.load();if($(".modal-box").length){$(".modal-box").remove()}if($("#modal-overlay").length){$("#modal-overlay").remove()}this.$modalBox.appendTo(document.body);this.$modalOverlay.appendTo(document.body);this.bodyOveflow=$(document.body).css("overflow");$(document.body).css("overflow","hidden");if(this.isMobile()){this.showOnMobile()}else{this.showOnDesktop()}if(!this.isMobile()){setTimeout($.proxy(this.showOnDesktop,this),0);$(window).on("resize",$.proxy(this.resize,this))}this.$modalOverlay.show();this.$modalBox.show()},resize:function(){if(this.isMobile()){this.showOnMobile()}else{this.showOnDesktop()}},isMobile:function(){var e=window.matchMedia("(max-width: 767px)");return e.matches?true:false},showOnDesktop:function(){var e=this.$modal.outerHeight();var t=$(window).height();var n=$(window).width();if(this.width>n){this.$modal.css({width:"96%",marginTop:t/2-e/2+"px"});return}if(e>t){this.$modal.css({width:this.width+"px",marginTop:"20px"})}else{this.$modal.css({width:this.width+"px",marginTop:t/2-e/2+"px"})}},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},setTitle:function(e){this.$modalHeader.html(e)},setButtons:function(e){for(var t=0;t<e.length;t++){var n=$("<button>").addClass(e[t].class).html(e[t].title);n.on("click",$.proxy(e[t].click,this));this.$modalFooter.append(n)}var r=this.$modalFooter.find("button");var i=r.size();if(i===0)return;r.css("width",100/i+"%")},setContent:function(e){if(typeof e=="object"){if(e.html){this.$modalBody.html(e.html);this.show()}if(e.selector){this.$modalBody.html($(e.selector).html());this.show()}if(e.ajax){$.ajax({url:e.ajax,cache:false,success:$.proxy(function(e){this.$modalBody.html(e);this.show()},this)})}}}};modal.prototype.Init.prototype=modal.prototype